<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="eu.esdihumboldt.hale.ui.io.config" name="I/O configuration wizard pages" schema="schema/eu.esdihumboldt.hale.ui.io.config.exsd"/>
   <extension-point id="eu.esdihumboldt.hale.ui.function" name="Function wizards" schema="schema/eu.esdihumboldt.hale.ui.function.exsd"/>
   <extension-point id="eu.esdihumboldt.hale.ui.io.action" name="UI extensions for I/O actions" schema="schema/eu.esdihumboldt.hale.ui.io.action.exsd"/>
   <extension-point id="eu.esdihumboldt.hale.ui.io.source" name="Import sources" schema="schema/eu.esdihumboldt.hale.ui.io.source.exsd"/>
   <extension-point id="eu.esdihumboldt.hale.ui.io.target" name="Custom I/O targets" schema="schema/eu.esdihumboldt.hale.ui.io.target.exsd"/>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="eu.esdihumboldt.hale.ui.project.open"
            name="Open project">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.project.export"
            name="Save project as">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.project.new"
            name="New project">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.project.save"
            name="Save project">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.entity.addnamedcontext"
            name="Add instance context">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.entity.editconditioncontext"
            name="Edit condition context">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.entity.purgeconditioncontext"
            name="Purge condition context">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.entity.removecontext"
            name="Remove instance context">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.io.import"
            name="Import">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.io.export"
            name="Export">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.align.add_relation"
            name="Add relation">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.schema.mappable_source"
            name="Edit mapping relevant source types">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.schema.mappable_target"
            name="Edit mapping relevant target types">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.schema.make_unmappable"
            name="Exclude type from mapping">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.edit.modify"
            name="Edit">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.align.clean"
            name="Clean alignment">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.instance.clear"
            name="Clean source data">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.schema.clear_source"
            name="Clear source schemas">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.schema.clear_target"
            name="Clear target schemas">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.entity.addindexcontext"
            name="Add index context">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.entity.addcqlcontext"
            name="Add CQL context">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.entity.addxpathcontext"
            name="Add XPath context">
      </command>
      <command
            defaultHandler="eu.esdihumboldt.hale.ui.service.instance.internal.handler.ToggleTransformationHandler"
            id="eu.esdihumboldt.hale.ui.instance.toggle_transformation"
            name="Live transformation">
         <state
               class="eu.esdihumboldt.hale.ui.service.instance.internal.handler.TransformationToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="eu.esdihumboldt.hale.ui.service.groovy.internal.handler.ToggleRestrictionHandler"
            id="eu.esdihumboldt.hale.ui.groovy.toggle_restriction"
            name="Groovy restriction">
         <state
               class="eu.esdihumboldt.hale.ui.service.groovy.internal.handler.RestrictionToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.transformation"
            name="Transform external data">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.values.update_occuring"
            name="Update occurring values">
      </command>
      <command
            description="En/disable usage of a sample data set based on the imported source data"
            id="eu.esdihumboldt.hale.ui.instance.toggle_sampling"
            name="Instance sampling">
         <state
               class="eu.esdihumboldt.hale.ui.service.instance.sample.internal.InstanceSamplingToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            description="Configure sample data selection"
            id="eu.esdihumboldt.hale.ui.instance.sampling.pref"
            name="Configure instance sampling">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.instance.reload_data"
            name="Reload source data">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.transform.projectdata"
            name="Transform project data">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.project.update"
            name="Update project">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.align.migrate.source"
            name="Replace sources">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.align.migrate.target"
            name="Replace targets">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="eu.esdihumboldt.hale.ui.service.project.handler.SaveProjectHandler"
            commandId="eu.esdihumboldt.hale.ui.project.save">
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.project.handler.NewProjectHandler"
            commandId="eu.esdihumboldt.hale.ui.project.new">
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.project.handler.SaveAsProjectHandler"
            commandId="eu.esdihumboldt.hale.ui.project.export">
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.project.handler.OpenProjectHandler"
            commandId="eu.esdihumboldt.hale.ui.project.open">
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.entity.internal.handler.AddNamedContextHandler"
            commandId="eu.esdihumboldt.hale.ui.entity.addnamedcontext">
         <activeWhen>
            <reference
                  definitionId="eu.esdihumboldt.hale.ui.selection.entity.allow_contextadd_named">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.entity.internal.handler.EditConditionContextHandler"
            commandId="eu.esdihumboldt.hale.ui.entity.editconditioncontext">
         <activeWhen>
            <reference
                  definitionId="eu.esdihumboldt.hale.ui.selection.entity.allow_contextedit">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.entity.internal.handler.PurgeConditionContextHandler"
            commandId="eu.esdihumboldt.hale.ui.entity.purgeconditioncontext">
         <activeWhen>
            <reference
                  definitionId="eu.esdihumboldt.hale.ui.selection.entity.allow_contextedit">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.entity.internal.handler.RemoveContextHandler"
            commandId="eu.esdihumboldt.hale.ui.entity.removecontext">
         <activeWhen>
            <reference
                  definitionId="eu.esdihumboldt.hale.ui.selection.entity.allow_contextremove">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.align.internal.handler.RemoveCellHandler"
            commandId="org.eclipse.ui.edit.delete">
         <activeWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <and>
                     <instanceof
                           value="eu.esdihumboldt.hale.common.align.model.Cell">
                     </instanceof>
                     <test
                           property="eu.esdihumboldt.hale.ui.service.align.cell.allow_remove">
                     </test>
                  </and>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.align.internal.handler.CleanAlignmentHandler"
            commandId="eu.esdihumboldt.hale.ui.align.clean">
         <enabledWhen>
            <with
                  variable="hale.alignment.has_cells">
               <equals
                     value="true">
               </equals>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.instance.internal.handler.ClearInstancesHandler"
            commandId="eu.esdihumboldt.hale.ui.instance.clear">
         <enabledWhen>
            <with
                  variable="hale.instances.has_source_resource">
               <equals
                     value="true">
               </equals>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.schema.handler.ClearSourceSchemasHandler"
            commandId="eu.esdihumboldt.hale.ui.schema.clear_source">
         <enabledWhen>
            <and>
               <with
                     variable="hale.instances.has_source">
                  <equals
                        value="false">
                  </equals>
               </with>
               <with
                     variable="hale.alignment.has_cells">
                  <equals
                        value="false">
                  </equals>
               </with>
               <with
                     variable="hale.schemas.has_source">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.schema.handler.ClearTargetSchemasHandler"
            commandId="eu.esdihumboldt.hale.ui.schema.clear_target">
         <enabledWhen>
            <and>
               <with
                     variable="hale.alignment.has_cells">
                  <equals
                        value="false">
                  </equals>
               </with>
               <with
                     variable="hale.schemas.has_target">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.io.action.wizard.SelectImportHandler"
            commandId="eu.esdihumboldt.hale.ui.io.import">
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.io.action.wizard.SelectExportHandler"
            commandId="eu.esdihumboldt.hale.ui.io.export">
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.transformation.TransformDataHandler"
            commandId="eu.esdihumboldt.hale.ui.transformation">
         <enabledWhen>
            <and>
               <with
                     variable="hale.alignment.has_cells">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.function.internal.NewRelationHandler"
            commandId="eu.esdihumboldt.hale.ui.align.add_relation">
         <activeWhen>
            <and>
               <with
                     variable="hale.schemas.has_mappable_source">
                  <equals
                        value="true">
                  </equals>
               </with>
               <with
                     variable="hale.schemas.has_mappable_target">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.schema.handler.EditMappableSourceTypesHandler"
            commandId="eu.esdihumboldt.hale.ui.schema.mappable_source">
         <activeWhen>
            <with
                  variable="hale.schemas.has_source">
               <equals
                     value="true">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.schema.handler.EditMappableTargetTypesHandler"
            commandId="eu.esdihumboldt.hale.ui.schema.mappable_target">
         <activeWhen>
            <with
                  variable="hale.schemas.has_target">
               <equals
                     value="true">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.schema.handler.MarkTypeUnmappableHandler"
            commandId="eu.esdihumboldt.hale.ui.schema.make_unmappable">
         <activeWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <and>
                     <instanceof
                           value="eu.esdihumboldt.hale.common.align.model.impl.TypeEntityDefinition">
                     </instanceof>
                     <test
                           property="eu.esdihumboldt.hale.ui.service.schema.type.allow_mark_unmappable">
                     </test>
                  </and>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.function.internal.EditRelationHandler"
            commandId="eu.esdihumboldt.hale.ui.edit.modify">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <and>
                        <instanceof
                              value="eu.esdihumboldt.hale.common.align.model.Cell">
                        </instanceof>
	                    <test
	                          property="eu.esdihumboldt.hale.ui.service.align.cell.allow_edit">
	                    </test>
                     </and>
                  </iterate>
                  <count
                        value="1">
                  </count>
               </and>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.entity.internal.handler.AddIndexContextHandler"
            commandId="eu.esdihumboldt.hale.ui.entity.addindexcontext">
         <activeWhen>
            <reference
                  definitionId="eu.esdihumboldt.hale.ui.selection.entity.allow_contextadd_index">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.values.internal.handler.UpdateOccurringValues"
            commandId="eu.esdihumboldt.hale.ui.values.update_occuring">
         <activeWhen>
            <reference
                  definitionId="eu.esdihumboldt.hale.ui.selection.entity.allow_update_occurring_values">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.io.action.handler.RemoveResourceHandler"
            commandId="org.eclipse.ui.edit.delete">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <and>
                        <instanceof
                              value="eu.esdihumboldt.hale.common.core.io.project.model.Resource">
                        </instanceof>
                        <test
                              property="eu.esdihumboldt.hale.ui.resource.allow_remove">
                        </test>
                     </and>
                  </iterate>
               </and>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.instance.sample.internal.ToggleInstanceSamplingHandler"
            commandId="eu.esdihumboldt.hale.ui.instance.toggle_sampling">
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.instance.sample.internal.InstanceViewPreferencesHandler"
            commandId="eu.esdihumboldt.hale.ui.instance.sampling.pref">
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.instance.ReloadDataHandler"
            commandId="eu.esdihumboldt.hale.ui.instance.reload_data">
         <enabledWhen>
            <with
                  variable="hale.instances.has_source_resource">
               <equals
                     value="true">
               </equals>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.transformation.TransformProjectDataHandler"
            commandId="eu.esdihumboldt.hale.ui.transform.projectdata">
         <enabledWhen>
            <and>
               <with
                     variable="hale.alignment.has_cells">
                  <equals
                        value="true">
                  </equals>
               </with>
               <with
                     variable="hale.instances.has_source_resource">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.project.handler.UpdateProjectHandler"
            commandId="eu.esdihumboldt.hale.ui.project.update">
         <activeWhen>
            <or>
               <with
                     variable="hale.schemas.has_source">
                  <equals
                        value="true">
                  </equals>
               </with>
               <with
                     variable="hale.schemas.has_target">
                  <equals
                        value="true">
                  </equals>
               </with>
            </or>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.align.internal.handler.ReplaceSourcesHandler"
            commandId="eu.esdihumboldt.hale.ui.align.migrate.source">
         <activeWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="or">
                  <and>
                     <instanceof
                           value="eu.esdihumboldt.hale.common.align.model.Cell">
                     </instanceof>
                     <test
                           property="eu.esdihumboldt.hale.ui.service.align.cell.allow_edit">
                     </test>
                  </and>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="eu.esdihumboldt.hale.ui.service.align.internal.handler.ReplaceTargetsHandler"
            commandId="eu.esdihumboldt.hale.ui.align.migrate.target">
         <activeWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="or">
                  <and>
                     <instanceof
                           value="eu.esdihumboldt.hale.common.align.model.Cell">
                     </instanceof>
                     <test
                           property="eu.esdihumboldt.hale.ui.service.align.cell.allow_edit">
                     </test>
                  </and>
               </iterate>
            </with>
         </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="eu.esdihumboldt.hale.ui.service.instance.internal.InstanceServiceSource">
         <variable
               name="hale.instances.has_transformed"
               priorityLevel="workbench">
         </variable>
         <variable
               name="hale.instances.has_source"
               priorityLevel="workbench">
         </variable>
         <variable
               name="hale.instances.has_source_resource"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
      <serviceFactory
            factoryClass="eu.esdihumboldt.hale.ui.service.internal.HaleServiceFactory">
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.report.ReportService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.instance.InstanceService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.align.AlignmentService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.project.ProjectService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.project.RecentProjectsService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.schema.SchemaService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.entity.EntityDefinitionService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.instance.sample.InstanceSampleService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.instance.validation.InstanceValidationService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.geometry.service.GeometrySchemaService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.common.service.population.PopulationService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.values.OccurringValuesService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.common.service.compatibility.CompatibilityService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.project.RecentResources">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.ui.service.instance.sample.InstanceViewService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.common.align.io.EntityResolver">
         </service>
         <service
               serviceClass="eu.esdihumboldt.util.groovy.sandbox.GroovyService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.common.align.service.FunctionService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.common.align.service.TransformationFunctionService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.common.align.transformation.service.TransformationSchemas">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.common.core.io.project.ProjectInfoService">
         </service>
         <service
               serviceClass="eu.esdihumboldt.hale.common.tasks.TaskService">
         </service>
      </serviceFactory>
      <sourceProvider
            provider="eu.esdihumboldt.hale.ui.service.schema.internal.SchemaServiceSource">
         <variable
               name="hale.schemas.has_source"
               priorityLevel="workbench">
         </variable>
         <variable
               name="hale.schemas.has_target"
               priorityLevel="workbench">
         </variable>
         <variable
               name="hale.schemas.has_mappable_source"
               priorityLevel="workbench">
         </variable>
         <variable
               name="hale.schemas.has_mappable_target"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
      <sourceProvider
            provider="eu.esdihumboldt.hale.ui.service.align.internal.AlignmentServiceSource">
         <variable
               name="hale.alignment.has_cells"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
      <sourceProvider
            provider="eu.esdihumboldt.hale.ui.service.instance.internal.ExportConfigurationServiceSource">
         <variable
               name="hale.project.has_export_configurations"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         point="eu.esdihumboldt.hale.ui.io.action">
      <action-ui
            action="eu.esdihumboldt.hale.io.schema.read.source"
            customTitle="Import source schema"
            id="eu.esdihumboldt.hale.io.schema.read.source.ui"
            label="Source schema..."
            priority="-10"
            projectResource="true"
            ui-advisor="eu.esdihumboldt.hale.ui.io.schema.SourceSchemaActionUIAdvisor"
            wizard="eu.esdihumboldt.hale.ui.io.schema.SchemaImportWizard">
      </action-ui>
      <action-ui
            action="eu.esdihumboldt.hale.io.schema.read.target"
            customTitle="Import target schema"
            id="eu.esdihumboldt.hale.io.schema.read.target.ui"
            label="Target schema..."
            priority="-9"
            projectResource="true"
            ui-advisor="eu.esdihumboldt.hale.ui.io.schema.TargetSchemaActionUIAdvisor"
            wizard="eu.esdihumboldt.hale.ui.io.schema.SchemaImportWizard">
      </action-ui>
      <action-ui
            action="eu.esdihumboldt.hale.io.instance.read.source"
            customTitle="Import source data"
            id="eu.esdihumboldt.hale.io.instance.read.source.ui"
            label="Source data..."
            priority="-6"
            projectResource="true"
            wizard="eu.esdihumboldt.hale.ui.io.instance.InstanceImportWizard">
         <enabledWhen
               disabledReason="Load a source schema first">
            <with
                  variable="hale.schemas.has_mappable_source">
               <equals
                     value="true">
               </equals>
            </with>
         </enabledWhen>
      </action-ui>
      <action-ui
            action="eu.esdihumboldt.hale.io.align.addbase"
            customTitle="Add Base alignment"
            id="eu.esdihumboldt.hale.io.align.addbase.ui"
            label="Base alignment..."
            priority="-1"
            projectResource="false"
            wizard="eu.esdihumboldt.hale.ui.io.align.BaseAlignmentImportWizard">
         <enabledWhen
               disabledReason="Load source and target schemas first">
            <and>
               <with
                     variable="hale.schemas.has_mappable_source">
                  <equals
                        value="true">
                  </equals>
               </with>
               <with
                     variable="hale.schemas.has_mappable_target">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </enabledWhen>
      </action-ui>
      <action-ui
            action="eu.esdihumboldt.hale.io.align.read"
            customTitle="Import alignment"
            id="eu.esdihumboldt.hale.io.align.read.ui"
            label="Alignment..."
            priority="0"
            projectResource="false"
            wizard="eu.esdihumboldt.hale.ui.io.align.AlignmentImportWizard">
         <enabledWhen
               disabledReason="Load source and target schemas first">
            <and>
               <with
                     variable="hale.schemas.has_mappable_source">
                  <equals
                        value="true">
                  </equals>
               </with>
               <with
                     variable="hale.schemas.has_mappable_target">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </enabledWhen>
      </action-ui>
      <action-ui
            action="eu.esdihumboldt.hale.io.align.write"
            customTitle="Export alignment"
            id="eu.esdihumboldt.hale.io.align.write.ui"
            label="Alignment..."
            priority="0"
            projectResource="false"
            wizard="eu.esdihumboldt.hale.ui.io.align.AlignmentExportWizard">
         <enabledWhen
               disabledReason="The current alignment is empty">
            <with
                  variable="hale.alignment.has_cells">
               <equals
                     value="true">
               </equals>
            </with>
         </enabledWhen>
      </action-ui>
      <action-ui
            action="eu.esdihumboldt.hale.io.instance.write.transformed"
            customTitle="Export transformed data"
            id="eu.esdihumboldt.hale.io.instance.write.transformed.ui"
            label="Transformed data..."
            priority="0"
            projectResource="false"
            wizard="eu.esdihumboldt.hale.ui.io.instance.InstanceExportWizard">
         <enabledWhen
               disabledReason="No transformed instances available">
            <with
                  variable="hale.instances.has_transformed">
               <equals
                     value="true">
               </equals>
            </with>
         </enabledWhen>
      </action-ui>
      <action-ui
			action="eu.esdihumboldt.hale.io.archive.export"
			id="eu.esdihumboldt.hale.io.archive.export"
			label="Project archive..."
			priority="0"
			projectResource="false"
			wizard="eu.esdihumboldt.hale.ui.io.project.ArchiveProjectExportWizard">
		</action-ui>
		<action-ui
			action="eu.esdihumboldt.hale.io.archive.import"
			id="eu.esdihumboldt.hale.io.archive.import"
			label="Project archive..."
			priority="0"
			projectResource="false"
			wizard="eu.esdihumboldt.hale.ui.io.project.ArchiveProjectImportWizard">
		</action-ui>
  <action-ui
        action="eu.esdihumboldt.hale.io.schema.export.source"
        customTitle="Export source schema"
        id="eu.esdihumboldt.hale.io.schema.export.source.ui"
        label="Source schema..."
        priority="10"
        projectResource="false"
        wizard="eu.esdihumboldt.hale.ui.io.schema.SchemaExportWizard">
     <enabledWhen
           disabledReason="Load a source schema first">
        <with
              variable="hale.schemas.has_mappable_source">
           <equals
                 value="true">
           </equals>
        </with>
     </enabledWhen>
  </action-ui>
  <action-ui
        action="eu.esdihumboldt.hale.io.schema.export.target"
        customTitle="Export target schema"
        id="eu.esdihumboldt.hale.io.schema.export.target.ui"
        label="Target schema..."
        priority="10"
        projectResource="false"
        wizard="eu.esdihumboldt.hale.ui.io.schema.SchemaExportWizard">
     <enabledWhen
           disabledReason="Load a target schema first">
        <with
              variable="hale.schemas.has_mappable_target">
           <equals
                 value="true">
           </equals>
        </with>
     </enabledWhen>
  </action-ui>
  <action-ui
        action="eu.esdihumboldt.hale.io.instance.write.source"
        id="eu.esdihumboldt.hale.io.instance.write.source.ui"
        label="Source data..."
        priority="0"
        projectResource="false"
        wizard="eu.esdihumboldt.hale.ui.io.instance.InstanceExportWizard">
     <enabledWhen
           disabledReason="No source instances available">
        <with
              variable="hale.instances.has_source">
           <equals
                 value="true">
           </equals>
        </with>
     </enabledWhen>
  </action-ui>
  <action-ui
            action="eu.esdihumboldt.hale.io.instance.write.transformed"
            customTitle="Create export configuration"
            id="eu.esdihumboldt.hale.io.instance.write.transformed.save.ui"
            label="Create custom data export..."
            priority="9"
            projectResource="false"
            wizard="eu.esdihumboldt.hale.ui.io.instance.exportconfig.SaveConfigurationInstanceExportWizard">
         <enabledWhen
               disabledReason="No target schema available">
            <with
                  variable="hale.schemas.has_mappable_target">
               <equals
                     value="true">
               </equals>
            </with>
         </enabledWhen>
      </action-ui>
   </extension>
   <extension
         point="eu.esdihumboldt.hale.ui.io.source">
      <source
            class="eu.esdihumboldt.hale.ui.io.source.FileSource"
            description="Load a resource from a file"
            icon="icons/file_obj.gif"
            id="eu.esdihumboldt.hale.ui.io.source.file"
            name="file"
            priority="-10">
      </source>
      <source
            class="eu.esdihumboldt.hale.ui.io.source.MultipleSchemaFilesSource"
            description="Load a resource from a file applicable for schema reader"
            icon="icons/file_obj.gif"
            id="eu.esdihumboldt.hale.ui.io.source.multiplefiles"
            name="multiple files"
            priority="-6"
            providerType="eu.esdihumboldt.hale.common.schema.io.SchemaReader">
      </source>
      <source
            class="eu.esdihumboldt.hale.ui.io.source.MultipleInstanceFilesSource"
            description="Load a resource from a file applicable for instance reader"
            icon="icons/file_obj.gif"
            id="eu.esdihumboldt.hale.ui.io.source.multiplefilesforinstance"
            name="multiple files"
            priority="-6"
            providerType="eu.esdihumboldt.hale.common.instance.io.InstanceReader">
      </source>
      <source
            class="eu.esdihumboldt.hale.ui.io.source.URLSource"
            description="Load a resource from the web"
            icon="icons/discovery.gif"
            id="eu.esdihumboldt.hale.ui.io.source.url"
            name="URL"
            priority="-5">
      </source>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <category
            id="eu.esdihumboldt.hale.ui"
            name="hale studio">
      </category>
   </extension>
   <extension
         point="eu.esdihumboldt.hale.io.action">
      <advisor
            action="eu.esdihumboldt.hale.io.schema.read.source"
            class="eu.esdihumboldt.hale.ui.io.schema.SourceSchemaImportAdvisor"
            id="eu.esdihumboldt.hale.ui.io.schema.read.source">
      </advisor>
      <advisor
            action="eu.esdihumboldt.hale.io.schema.read.target"
            class="eu.esdihumboldt.hale.ui.io.schema.TargetSchemaImportAdvisor"
            id="eu.esdihumboldt.hale.ui.io.schema.read.target">
      </advisor>
      <advisor
            action="eu.esdihumboldt.hale.io.instance.read.source"
            class="eu.esdihumboldt.hale.ui.io.instance.InstanceImportAdvisor"
            id="eu.esdihumboldt.hale.ui.io.instance.read.source">
      </advisor>
      <advisor
            action="eu.esdihumboldt.hale.io.align.addbase"
            class="eu.esdihumboldt.hale.ui.io.align.BaseAlignmentImportAdvisor"
            id="eu.esdihumboldt.hale.ui.io.align.addbase">
      </advisor>
      <advisor
            action="eu.esdihumboldt.hale.io.align.read"
            class="eu.esdihumboldt.hale.ui.io.align.AlignmentImportAdvisor"
            id="eu.esdihumboldt.hale.ui.io.align.read">
      </advisor>
      <advisor
            action="eu.esdihumboldt.hale.io.align.write"
            class="eu.esdihumboldt.hale.ui.io.align.AlignmentExportAdvisor"
            id="eu.esdihumboldt.hale.ui.io.align.write">
      </advisor>
      <advisor
            action="eu.esdihumboldt.hale.io.instance.write.transformed"
            class="eu.esdihumboldt.hale.ui.io.instance.InstanceExportAdvisor"
            id="eu.esdihumboldt.hale.ui.io.instance.write.transformed">
      </advisor>
      <advisor
			action="eu.esdihumboldt.hale.io.archive.export"
			class="eu.esdihumboldt.hale.ui.io.project.ArchiveProjectExportAdvisor"
			id="eu.esdihumboldt.hale.io.archive.export">
	  </advisor>
	  <advisor
			action="eu.esdihumboldt.hale.io.archive.import"
			class="eu.esdihumboldt.hale.ui.io.project.ArchiveProjectImportAdvisor"
			id="eu.esdihumboldt.hale.io.archive.import">
	  </advisor>
   <advisor
         action="eu.esdihumboldt.hale.io.schema.export.source"
         class="eu.esdihumboldt.hale.ui.io.schema.SourceSchemaExportAdvisor"
         id="eu.esdihumboldt.hale.io.schema.export.source">
   </advisor>
   <advisor
         action="eu.esdihumboldt.hale.io.schema.export.target"
         class="eu.esdihumboldt.hale.ui.io.schema.TargetSchemaExportAdvisor"
         id="eu.esdihumboldt.hale.io.schema.export.target">
   </advisor>
   <advisor
         action="eu.esdihumboldt.hale.io.instance.write.source"
         class="eu.esdihumboldt.hale.ui.io.instance.SourceInstanceExportAdvisor"
         id="eu.esdihumboldt.hale.ui.io.instance.write.source">
   </advisor>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <command
               commandId="eu.esdihumboldt.hale.ui.entity.addnamedcontext"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <command
               commandId="eu.esdihumboldt.hale.ui.entity.addindexcontext"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <dynamic
               class="eu.esdihumboldt.hale.ui.service.entity.internal.handler.AddConditionContextContribution"
               id="eu.esdihumboldt.hale.ui.popup.addcondition">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="eu.esdihumboldt.hale.ui.selection.entity.allow_contextadd_condition">
               </reference>
            </visibleWhen>
         </dynamic>
         <command
               commandId="eu.esdihumboldt.hale.ui.entity.editconditioncontext"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <command
               commandId="eu.esdihumboldt.hale.ui.entity.purgeconditioncontext"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <command
               commandId="eu.esdihumboldt.hale.ui.entity.removecontext"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <or>
                        <test
                              property="eu.esdihumboldt.hale.ui.service.entity.has_named_context">
                        </test>
                        <test
                              property="eu.esdihumboldt.hale.ui.service.entity.has_index_context">
                        </test>
                        <test
                              property="eu.esdihumboldt.hale.ui.service.entity.has_condition_context">
                        </test>
                     </or>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <menu
               label="Set Priority Level">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <and>
                     <count
                           value="1">
                     </count>
                     <iterate
                           ifEmpty="false"
                           operator="and">
                        <and>
                           <instanceof
                                 value="eu.esdihumboldt.hale.common.align.model.Cell">
                           </instanceof>
                           <test
                                 property="eu.esdihumboldt.hale.ui.service.align.cell.allow_edit">
                           </test>
                        </and>
                     </iterate>
                  </and>
               </with>
            </visibleWhen>
            <dynamic
                  class="eu.esdihumboldt.hale.ui.function.contribution.SetPriorityContribution"
                  id="eu.esdihumboldt.hale.ui.cell.setpriority">
            </dynamic>
         </menu>
         <menu
               label="Transformation">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <and>
                     <count
                           value="1">
                     </count>
                     <iterate
                           ifEmpty="false"
                           operator="and">
                        <and>
                           <instanceof
                                 value="eu.esdihumboldt.hale.common.align.model.Cell">
                           </instanceof>
                           <test
                                 property="eu.esdihumboldt.hale.ui.service.align.cell.type_cell">
                           </test>
                        </and>
                     </iterate>
                  </and>
               </with>
            </visibleWhen>
            <dynamic
                  class="eu.esdihumboldt.hale.ui.function.contribution.SetTransformationModeContribution"
                  id="eu.esdihumboldt.hale.ui.dynamic2">
            </dynamic>
         </menu>
         <menu
               label="Replace with">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <and>
                     <count
                           value="1">
                     </count>
                     <iterate
                           ifEmpty="false"
                           operator="and">
                        <and>
                           <instanceof
                                 value="eu.esdihumboldt.hale.common.align.model.Cell">
                           </instanceof>
                           <test
                                 property="eu.esdihumboldt.hale.ui.service.align.cell.allow_remove">
                           </test>
                        </and>
                     </iterate>
                  </and>
               </with>
            </visibleWhen>
            <dynamic
                  class="eu.esdihumboldt.hale.ui.function.contribution.ReplaceFunctionWizardContribution"
                  id="eu.esdihumboldt.hale.ui.cell.replace">
            </dynamic>
         </menu>
         <menu
               label="Replace entities">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate
                        operator="or">
                     <and>
                        <instanceof
                              value="eu.esdihumboldt.hale.common.align.model.Cell">
                        </instanceof>
                        <test
                              property="eu.esdihumboldt.hale.ui.service.align.cell.allow_edit">
                        </test>
                     </and>
                  </iterate>
               </with>
            </visibleWhen>
            <command
                  commandId="eu.esdihumboldt.hale.ui.align.migrate.source"
                  label="Replace sources"
                  style="push">
            </command>
            <command
                  commandId="eu.esdihumboldt.hale.ui.align.migrate.target"
                  label="Replace targets"
                  style="push">
            </command>
         </menu>
         <command
               commandId="eu.esdihumboldt.hale.ui.edit.modify"
               label="Edit..."
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.ui.edit.delete"
               label="Delete"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <separator
               name="eu.esdihumboldt.hale.ui.popup.end"
               visible="true">
         </separator>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.trim.status?after=additions">
         <toolbar
               id="eu.esdihumboldt.hale.ui.compatibility">
            <control
                  class="eu.esdihumboldt.hale.ui.compatibility.CompatibilityModeComposite">
            </control>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="eu.esdihumboldt.hale.ui.service.entity.internal.tester.InstanceContextTester"
            id="eu.esdihumboldt.hale.ui.service.entity"
            namespace="eu.esdihumboldt.hale.ui.service.entity"
            properties="allow_add_named,allow_add_index,allow_add_condition,allow_edit_condition,has_named_context,has_index_context,has_condition_context,allow_remove"
            type="eu.esdihumboldt.hale.common.align.model.EntityDefinition">
      </propertyTester>
      <propertyTester
            class="eu.esdihumboldt.hale.ui.service.align.internal.tester.CellTester"
            id="eu.esdihumboldt.hale.ui.service.align.cell"
            namespace="eu.esdihumboldt.hale.ui.service.align.cell"
            properties="allow_remove,allow_edit,type_cell"
            type="eu.esdihumboldt.hale.common.align.model.Cell">
      </propertyTester>
      <propertyTester
            class="eu.esdihumboldt.hale.ui.service.schema.tester.TypeEntityDefinitionTester"
            id="eu.esdihumboldt.hale.ui.service.schema.type"
            namespace="eu.esdihumboldt.hale.ui.service.schema.type"
            properties="allow_mark_unmappable"
            type="eu.esdihumboldt.hale.common.align.model.impl.TypeEntityDefinition">
      </propertyTester>
      <propertyTester
            class="eu.esdihumboldt.hale.ui.service.values.internal.tester.OccurringValuesTester"
            id="eu.esdihumboldt.hale.ui.service.values"
            namespace="eu.esdihumboldt.hale.ui.service.values"
            properties="allow_update"
            type="eu.esdihumboldt.hale.common.align.model.impl.PropertyEntityDefinition">
      </propertyTester>
      <propertyTester
            class="eu.esdihumboldt.hale.ui.io.action.tester.ResourceTester"
            id="eu.esdihumboldt.hale.ui.resource"
            namespace="eu.esdihumboldt.hale.ui.resource"
            properties="allow_remove"
            type="eu.esdihumboldt.hale.common.core.io.project.model.Resource">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="eu.esdihumboldt.hale.ui.selection.entity.allow_contextadd_named">
         <with
               variable="selection">
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        property="eu.esdihumboldt.hale.ui.service.entity.allow_add_named">
                  </test>
               </iterate>
            </and>
         </with>
      </definition>
      <definition
            id="eu.esdihumboldt.hale.ui.selection.entity.allow_contextremove">
         <with
               variable="selection">
            <and>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        property="eu.esdihumboldt.hale.ui.service.entity.allow_remove">
                  </test>
               </iterate>
            </and>
         </with>
      </definition>
      <definition
            id="eu.esdihumboldt.hale.ui.selection.entity.allow_contextadd_index">
         <with
               variable="selection">
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        property="eu.esdihumboldt.hale.ui.service.entity.allow_add_index">
                  </test>
               </iterate>
            </and>
         </with>
      </definition>
      <definition
            id="eu.esdihumboldt.hale.ui.selection.entity.allow_contextedit">
         <with
               variable="selection">
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        property="eu.esdihumboldt.hale.ui.service.entity.allow_edit_condition">
                  </test>
               </iterate>
            </and>
         </with>
      </definition>
      <definition
            id="eu.esdihumboldt.hale.ui.selection.entity.allow_contextadd_condition">
         <with
               variable="selection">
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        property="eu.esdihumboldt.hale.ui.service.entity.allow_add_condition">
                  </test>
               </iterate>
            </and>
         </with>
      </definition>
      <definition
            id="eu.esdihumboldt.hale.ui.selection.entity.allow_update_occurring_values">
         <with
               variable="selection">
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <and>
                     <instanceof
                           value="eu.esdihumboldt.hale.common.align.model.impl.PropertyEntityDefinition">
                     </instanceof>
                     <test
                           property="eu.esdihumboldt.hale.ui.service.values.allow_update">
                     </test>
                  </and>
               </iterate>
            </and>
         </with>
      </definition>
   </extension>
   <extension
         point="eu.esdihumboldt.hale.ui.io.config">
      <configPage
            class="eu.esdihumboldt.hale.ui.io.project.pages.ZipProjectWriterConfigurationPage"
            order="10">
         <provider
               ref="eu.esdihumboldt.hale.io.project.hale25.writer">
         </provider>
      </configPage>
      <configPage
            class="eu.esdihumboldt.hale.ui.io.project.pages.ArchiveProjectWriterConfigurationPage"
            order="0">
         <provider
               ref="eu.esdihumboldt.hale.io.project.hale25.zip.writer">
         </provider>
      </configPage>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="eu.esdihumboldt.hale.ui.edit.modify"
            icon="icons/edit.gif">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.align.add_relation"
            icon="icons/add_relation.gif">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.schema.mappable_source"
            disabledIcon="icons/source_types2_d.png"
            icon="icons/source_types2.png">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.schema.mappable_target"
            disabledIcon="icons/target_types2_d.png"
            icon="icons/target_types2.png">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.schema.make_unmappable"
            icon="icons/rm_type.png">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.entity.addindexcontext"
            icon="icons/add.gif">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.entity.addnamedcontext"
            icon="icons/add.gif">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.entity.addcqlcontext"
            icon="icons/filter.gif">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.entity.addxpathcontext"
            icon="icons/filter.gif">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.entity.removecontext"
            icon="icons/remove.gif">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.instance.toggle_transformation"
            icon="icons/play.gif">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.groovy.toggle_restriction"
            icon="icons/groovy_protect.png">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.instance.toggle_sampling"
            icon="icons/samples.png">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.instance.reload_data"
            icon="icons/reload_source.png">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.instance.sampling.pref"
            icon="icons/samples_config.png">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.project.update"
            icon="icons/refresh.gif">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="eu.esdihumboldt.hale.ui.preferences.project"
            class="eu.esdihumboldt.hale.ui.service.instance.sample.internal.InstanceViewPreferencePage"
            id="eu.esdihumboldt.hale.ui.preferences.instanceview"
            name="Source data">
      </page>
      <page
            class="eu.esdihumboldt.hale.ui.service.project.internal.ProjectPreferencePage"
            id="eu.esdihumboldt.hale.ui.preferences.project"
            name="Project">
      </page>
      <page
            category="eu.esdihumboldt.hale.ui.preferences.project"
            class="eu.esdihumboldt.hale.ui.service.project.internal.ProjectVariablesPreferencePage"
            id="eu.esdihumboldt.hale.ui.preferences.projectvars"
            name="Variables">
      </page>
   </extension>
   <extension
         point="eu.esdihumboldt.hale.ui.io.target">
      <target
            class="eu.esdihumboldt.hale.ui.io.target.FileTarget"
            id="file">
      </target>
      <target
            class="eu.esdihumboldt.hale.ui.io.instance.FileValidateTarget"
            id="instanceFile">
      </target>
      <target
            class="eu.esdihumboldt.hale.ui.io.target.URLTarget"
            id="uri">
      </target>
   </extension>

</plugin>
