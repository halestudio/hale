<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Transformation via the command line</title>
</head>
<body>
	<h1>Transformation via the command line</h1>
	<p>This help topic is about performing transformation of source
		data using the command line interface provided by HALE. It allows you
		to execute transformations based on mappings defined in HALE, without
		having to use HALE as desktop application, for instance to run the
		transformation automatically on a regular basis or to integrate it
		with existing infrastructure.</p>
	<p>The following are the basic things you need to use the command
		line interface:</p>
	<ol>
		<li>An existing <b>HALE project file</b>, e.g. a project archive (.halez).</li>
		<li>The location of the <b>source data to transform</b>, either an URL or a file name. The data has to match the source schema of the project.</li>
		<li>Configuration on <b>how and where to write the transformed data</b>.</li>
	</ol>
	
	<h2>General usage</h2>
	<p>You can run HALE on the command line either using the HALE
		executable (e.g. HALE.exe) or using Java directly. Depending on the
		operating system, behavior may be different, but in general it is
		better to use Java directly (but make sure you have a compatible
		version of Java installed), especially if you include the task in an
		automated process. The advantage of using the HALE executable is that
		it uses the Java version that is shipped with HALE. The following are
		the commands to show the usage of the command line interface, with the
		executable or via Java, assuming your working directory is the HALE
		installation folder:</p>
	<p>Running the HALE executable</p>
	<pre class="cli"><code><b>&gt;</b> HALE -nosplash -application hale.transform</code></pre>
	<p>Running Java</p>
	<pre class="cli"><code><b>&gt;</b> java -jar plugins\org.eclipse.equinox.launcher_1.3.0.v20140415-2008.jar -application hale.transform</code></pre>
	<p>
		Running the command above will show the usage information of the
		transformation application. Please note that for the Java call, the
		version of the launcher JAR file may change with new HALE versions.
		For simplicity, the following examples will use the
		<code>HALE</code>
		executable, you can substitute HALE by the call to Java as above.
	</p>
	<p class="Note">
		<b>Note:</b>
		If using the HALE executable on Windows you will probably want to add the <code>-console</code> parameter as well:<br>
		<code>HALE -nosplash -console -application hale.transform</code><br>
		Otherwise you may get no feedback from the application (if you still get no feedback, launch via Java).
	</p>
	<h3>Configuration parameters</h3>
	<p>The following is the usage information provided by the transformation application:</p>
	<pre><code>HALE -nosplash -application hale.transform
     -project &lt;file-or-URI-to-HALE-project&gt;
     -source &lt;file-or-URI-to-source-data&gt;
         [-providerId &lt;ID-of-source-reader&gt;]
         [&lt;setting&gt;...]
     -target &lt;target-file&gt;
         [-preset &lt;name-of-export-preset&gt;]
         [-providerId &lt;ID-of-target-writer&gt;]
         [&lt;setting&gt;...]
     [options...]

  where setting is
     -S&lt;setting-name&gt; &lt;value%gt;
         -X&lt;setting-name&gt; &lt;path-to-XML-file&gt;

  and options are
     -reportsOut &lt;reports-file&gt;
     -stacktrace</code></pre>
	<h4>HALE project file</h4>
	<pre class="cli"><code>-project &lt;file-or-URI-to-HALE-project&gt;</code></pre>
	<p>
		A HALE project contains all the necessary information to perform the
		transformation from one data model into another. It references the
		source and target schemas and describes the transformation rules in
		the aligment.<br> Use the
		<code>-project</code>
		parameter to provide the location to your project file, as a relative
		or absolute path, or as a URI.
	</p>
	<div>Here some examples on how you can provide paths to a project file on Windows: 
		<ul>
			<li><code>C:\Hale-Project\myProject.halez</code> (absolute path)</li>
			<li><code>myProject.halez</code> (relative path)</li>
			<li><code>"C:\Hale-Project\my Project.halez"</code> (quoted absolute path with spaces)</li>
		</ul>
	</div>
	<p>
	<h3>To 2.</h3>
		<p>The source data need to be one of the supported file formats. 
		The same rules as for project path applies to source data path. 
		See 1. If the HALE application can identify the file's format 
		and no additional parameter are required to read the source data 
		you can omit the source reader. See source reader for further 
		information on this topic. 
		</p>
	<h3>To 3.</h3>
		<p>You can use any path like 1. and 2., but you also have to use 
		one supported target file format. The file do not have to exist.</p>
	<h3>To 4.</h3>
		<p>You have to use either a target writer through a providerId or a 
		preset through its name. See target writer for further 
		information on this topic. </p>
		
	<h3>Info on path and file names</h3>
	<p>You can use relative path and spaces inside the path and/or filename. 
	But you have to notice that the relative path is the location your command 
	prompt is currently at and that you have to use quotes if there are any 
	spaces.</p>
	
	<h3>Info on preset</h3>
	<p>There are standard presets or you can create a custom preset. To 
	create a custom preset you have to open your HALE project and export a 
	custom data export.</p>
	
	<div>
	<h2>Source Reader and Target Writer</h2>
	<p>There are several source reader and target writer. To use a specific 
	source reader you can use -providerId &ltID-of-source-reader&gt, same goes for 
	instance writer. You can lookup the desired providerId at 
	<a href ="PLUGINS_ROOT/eu.esdihumboldt.hale.doc.user.instanceio/instanceIO/instanceIO.html">InstanceIO</a> help page.</p>
	<p>As mentioned before there are additional settings that can or have to be used, 
	Like the username and password for a database. After using the -providerId or 
	-preset (for target only) append <b>-S&ltsetting-name&gt &ltvalue&gt</b> to 
	use a setting. The <b>-S</b> flag only applies for String type parameter, like a 
	path or any String value. However there are some parameter which need another 
	value type. For example: The use of inline metadata coded as XML. To use 
	XML code as an input you can use <b>-X</b> like <b>-X&ltsetting-name&gt &ltpath-to-value&gt</b>, 
	whereas the value is a path to an XML file. Therefore the metadata can not be 
	passed directly but with the workaround of an XML file.<br/>
	For more information to a reader or writer and its parameters visit: 
	<a href ="PLUGINS_ROOT/eu.esdihumboldt.hale.doc.user.instanceio/instanceIO/instanceIO.html">InstanceIO</a> 
	help page and follow the link to your desired provider.</p>
	</div>
	
	<h2>Example Command</h2>
	<p>Here is an example on how to use a command. There is a 
	HALE project named "toInspire.halez" which contains a source schema 
	and a mapping to the INSPIRE schema. The source data is contained 
	in the "geographicData.shp" (schapefile) file. The transformed 
	data should be stored as "inspireData.gml" and as GML (INSPIRE SptialDataSet) 
	file format. The source reader do not have to be declared and the 
	providerId for the target writer is "eu.esdihumboldt.hale.io.inspiregml.writer". 
	Alternative to the providerId the preset can be used and reads 
	as follows "INSPIRE SpatialDataSet".</p>
	<p>
	The whole command could be:<br/>
	<b>HALE -nosplash -console -application hale.transform 
	-project "C:\mapping projects\toInspire.halez" 
	-source "C:\source data\geographicData.shp" 
	-target "C:\target data\inspireData.gml" 
	-providerId eu.esdihumboldt.hale.io.inspiregml.writer</b>
	<br/>or<br/>
	<b>HALE -nosplash -console -application hale.transform 
	-project "C:\mapping projects\toInspire.halez" 
	-source "C:\source data\geographicData.shp" 
	-target "C:\target data\inspireData.gml" 
	-preset INSPIRE SpatialDataSet</b>
	</p>
	<br/><br/>
	<p>In addition the *.jar as command can be used to execute the transformation.<br/>
	The command HALE is replaced by: <br/>
	<b>java -jar org.eclipse.equinox.launcher_{version-number}.jar -application hale.transform</b>. 
	You can lookup the version-number in the .\plugins\ in you installation directory of HALE.<br/>
	Here is an example command on how to use this (version-number = 1.2.0.v20110502):<br/>
	<b>java -jar .\plugins\org.eclipse.equinox.launcher_1.2.0.v20110502.jar 
	-application hale.transform 
	-project "C:\mapping projects\toInspire.halez" 
	-source "C:\source data\geographicData.shp" 
	-target "C:\target data\inspireData.gml" 
	-preset INSPIRE SpatialDataSet</b>
	</b></p>
	
	<!-- related tasks: additional instance reader or writer parameter -->
	<div>
		<br> <img
			src="PLUGINS_ROOT/eu.esdihumboldt.hale.doc.user/images/ngrelt.png">
		<p>
			<a href="PLUGINS_ROOT/eu.esdihumboldt.hale.doc.user.instanceio/instanceIO/instanceIO.html">Instance IO Reference Page</a>
		</p>
	</div>
</body>
</html>