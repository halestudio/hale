<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="eu.esdihumboldt.hale.ui.views.styledmap.layout" name="Map layouts" schema="schema/eu.esdihumboldt.hale.ui.views.styledmap.layout.exsd"/>
   <extension
         point="de.fhg.igd.mapviewer.view.MapViewExtension">
      <extra
            class="eu.esdihumboldt.hale.ui.views.styledmap.StyledMapExtra"
            name="HALE Styled Map">
      </extra>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="eu.esdihumboldt.hale.ui.views.styledmap.StyledMapPerspective"
            icon="icons/world.gif"
            id="eu.esdihumboldt.hale.ui.views.styledmap"
            name="Map">
      </perspective>
   </extension>
   <extension
         point="de.fhg.igd.mapviewer.TileOverlayPainter">
      <painter
            class="eu.esdihumboldt.hale.ui.views.styledmap.painter.SourceInstancePainter"
            id="eu.esdihumboldt.hale.ui.views.styledmap.source"
            name="Source data"
            priority="5"
            showInMiniMap="false">
      </painter>
      <painter
            class="eu.esdihumboldt.hale.ui.views.styledmap.painter.TransformedInstancePainter"
            id="eu.esdihumboldt.hale.ui.views.styledmap.transformed"
            name="Transformed data"
            priority="6"
            showInMiniMap="false">
      </painter>
   </extension>
   <extension
         point="de.fhg.igd.mapviewer.MapTool">
      <tool
            class="eu.esdihumboldt.hale.ui.views.styledmap.tool.InstanceTool"
            description="&lt;html&gt;&lt;body&gt;&lt;p&gt;&lt;font size=&quot;2&quot; face=&quot;Arial&quot;&gt;Instance selection&lt;br&gt;&lt;b&gt;Left click:&lt;/b&gt; Select an object or close a selection rectangle&lt;br&gt;&lt;b&gt;Ctrl+click:&lt;/b&gt; Select an object or close a selection rectangle and add it to the current selection&lt;br&gt;&lt;b&gt;Alt+click:&lt;/b&gt; Opens a selection rectangle (Cancel using right click)&lt;br&gt;&lt;b&gt;Double click:&lt;/b&gt; Center on this position and zoom in by one level&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
            icon="icons/pointer.png"
            name="Selection"
            priority="20">
      </tool>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:de.fhg.igd.mapviewer.view.MapView">
         <separator
               name="eu.esdihumboldt.hale.ui.views.styledmap"
               visible="true">
         </separator>
         <command
               commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToAll"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu?before=window">
         <menu
               label="Map">
            <menu
                  label="Layout">
               <dynamic
                     class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.extension.PainterLayoutContribution"
                     id="eu.esdihumboldt.hale.ui.views.styledmap.layouts">
               </dynamic>
            </menu>
            <command
                  commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToAll"
                  style="push">
            </command>
            <separator
                  name="eu.esdihumboldt.hale.ui.views.styledmap.mapmenu.separator"
                  visible="true">
            </separator>
            <dynamic
                  class="de.fhg.igd.mapviewer.view.MapMenu"
                  id="eu.esdihumboldt.hale.ui.views.styledmap.mapmenu">
            </dynamic>
            <visibleWhen
                  checkEnabled="false">
               <or>
                  <with
                        variable="activePartId">
                     <equals
                           value="de.fhg.igd.mapviewer.view.MapView">
                     </equals>
                  </with>
                  <with
                        variable="activeWorkbenchWindow.activePerspective">
                     <equals
                           value="eu.esdihumboldt.hale.ui.views.styledmap">
                     </equals>
                  </with>
               </or>
            </visibleWhen>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToAll"
            icon="icons/navigation.png">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="eu.esdihumboldt.hale.ui.views.styledmap.handler.ZoomToAllHandler"
            description="Zoom to the instances available in the map"
            id="eu.esdihumboldt.hale.ui.views.styledmap.zoomToAll"
            name="Zoom to instances">
      </command>
   </extension>
   <extension
         point="eu.esdihumboldt.hale.ui.views.styledmap.layout">
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.NoLayout"
            id="eu.esdihumboldt.hale.ui.views.styledmap.default"
            name="Overlay (Source and Transformed)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.RowLayout"
            id="eu.esdihumboldt.hale.ui.views.styledmap.row.sourcefirst"
            name="Rows (Source, Transformed)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.RowLayout"
            id="eu.esdihumboldt.hale.ui.views.styledmap.row.transformedfirst"
            name="Rows (Transformed, Source)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
      </layout>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <serviceFactory
            factoryClass="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.extension.internal.PainterLayoutServiceFactory">
         <service
               serviceClass="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.extension.PainterLayoutService"></service>
      </serviceFactory>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="eu.esdihumboldt.hale.ui.views.styledmap.preferences.StyledMapPreferenceInitializer">
      </initializer>
   </extension>
   <extension
         point="de.fhg.igd.mapviewer.MapPainter">
      <painter
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.extension.LayoutAugmentationPainter"
            name="Layout augmentation">
      </painter>
   </extension>

</plugin>
