<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="eu.esdihumboldt.hale.ui.views.styledmap.layout" name="Map layouts" schema="schema/eu.esdihumboldt.hale.ui.views.styledmap.layout.exsd"/>
   <extension
         point="de.fhg.igd.mapviewer.view.MapViewExtension">
      <extra
            class="eu.esdihumboldt.hale.ui.views.styledmap.StyledMapExtra"
            name="HALE Styled Map">
      </extra>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="eu.esdihumboldt.hale.ui.views.styledmap.StyledMapPerspective"
            icon="icons/world.gif"
            id="eu.esdihumboldt.hale.ui.views.styledmap"
            name="Map">
      </perspective>
   </extension>
   <extension
         point="de.fhg.igd.mapviewer.TileOverlayPainter">
      <painter
            class="eu.esdihumboldt.hale.ui.views.styledmap.painter.SourceInstancePainter"
            id="eu.esdihumboldt.hale.ui.views.styledmap.source"
            name="Source data"
            priority="5"
            showInMiniMap="false">
      </painter>
      <painter
            class="eu.esdihumboldt.hale.ui.views.styledmap.painter.TransformedInstancePainter"
            id="eu.esdihumboldt.hale.ui.views.styledmap.transformed"
            name="Transformed data"
            priority="6"
            showInMiniMap="false">
      </painter>
   </extension>
   <extension
         point="de.fhg.igd.mapviewer.MapTool">
      <tool
            class="eu.esdihumboldt.hale.ui.views.styledmap.tool.InstanceTool"
            description="&lt;html&gt;&lt;body&gt;&lt;p&gt;&lt;font size=&quot;2&quot; face=&quot;Arial&quot;&gt;Instance selection&lt;br&gt;&lt;b&gt;Left click:&lt;/b&gt; Select an object or close a selection rectangle&lt;br&gt;&lt;b&gt;Ctrl+click:&lt;/b&gt; Select an object or close a selection rectangle and add it to the current selection&lt;br&gt;&lt;b&gt;Alt+click:&lt;/b&gt; Opens a selection rectangle (Cancel using right click)&lt;br&gt;&lt;b&gt;Double click:&lt;/b&gt; Center on this position and zoom in by one level&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"
            icon="icons/pointer.png"
            name="Selection"
            priority="20">
      </tool>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:eu.esdihumboldt.hale.ui.views.styledmap">
         <separator
               name="eu.esdihumboldt.hale.ui.views.styledmap"
               visible="true">
         </separator>
         <command
               commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToAll"
               style="push">
         </command>
         <command
               commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToSelection"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu?before=window">
         <menu
               label="Map">
            <menu
                  label="Layout">
               <dynamic
                     class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.extension.PainterLayoutContribution"
                     id="eu.esdihumboldt.hale.ui.views.styledmap.layouts">
               </dynamic>
            </menu>
            <command
                  commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToAll"
                  style="push">
            </command>
            <command
                  commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToSelection"
                  style="push">
            </command>
            <separator
                  name="eu.esdihumboldt.hale.ui.views.styledmap.mapmenu.separator"
                  visible="true">
            </separator>
            <dynamic
                  class="de.fhg.igd.mapviewer.view.MapMenu"
                  id="eu.esdihumboldt.hale.ui.views.styledmap.mapmenu">
            </dynamic>
            <visibleWhen
                  checkEnabled="false">
               <or>
                  <with
                        variable="activePartId">
                     <equals
                           value="eu.esdihumboldt.hale.ui.views.styledmap">
                     </equals>
                  </with>
                  <with
                        variable="activeWorkbenchWindow.activePerspective">
                     <equals
                           value="eu.esdihumboldt.hale.ui.views.styledmap">
                     </equals>
                  </with>
               </or>
            </visibleWhen>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="eu.esdihumboldt.hale.ui.views.styledmap.toolbar"
               label="Map">
            <dynamic
                  class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.extension.IconPainterLayoutContribution"
                  id="eu.esdihumboldt.hale.ui.views.styledmap.layouts">
               <visibleWhen
                     checkEnabled="false">
                  <or>
                     <with
                           variable="activePartId">
                        <equals
                              value="eu.esdihumboldt.hale.ui.views.styledmap">
                        </equals>
                     </with>
                     <with
                           variable="activeWorkbenchWindow.activePerspective">
                        <equals
                              value="eu.esdihumboldt.hale.ui.views.styledmap">
                        </equals>
                     </with>
                  </or>
               </visibleWhen>
            </dynamic>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToAll"
            icon="icons/nav_bounds.png">
      </image>
      <image
            commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToSelection"
            icon="icons/navigation.png">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="eu.esdihumboldt.hale.ui.views.styledmap.handler.ZoomToAllHandler"
            description="Zoom to all instances available in the map"
            id="eu.esdihumboldt.hale.ui.views.styledmap.zoomToAll"
            name="Zoom to instances">
      </command>
      <command
            id="eu.esdihumboldt.hale.ui.views.styledmap.zoomToSelection"
            name="Zoom to selection">
      </command>
   </extension>
   <extension
         point="eu.esdihumboldt.hale.ui.views.styledmap.layout">
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.NoLayout"
            icon="icons/overlay.png"
            id="eu.esdihumboldt.hale.ui.views.styledmap.default"
            name="Overlay"
            order="-10">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.RowLayout"
            icon="icons/top_to_bottom.gif"
            id="eu.esdihumboldt.hale.ui.views.styledmap.row.sourcefirst"
            name="Rows (Source, Transformed)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.RowLayout"
            icon="icons/bottom_to_top.gif"
            id="eu.esdihumboldt.hale.ui.views.styledmap.row.transformedfirst"
            name="Rows (Transformed, Source)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.ColumnLayout"
            icon="icons/left-to-right.gif"
            id="eu.esdihumboldt.hale.ui.views.styledmap.column.sourcefirst"
            name="Columns (Source, Transformed)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.ColumnLayout"
            icon="icons/right-to-left.gif"
            id="eu.esdihumboldt.hale.ui.views.styledmap.column.transformedfirst"
            name="Columns (Transformed, Source)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.OnlyFirstLayout"
            icon="icons/source.png"
            id="eu.esdihumboldt.hale.ui.views.styledmap.only.source"
            name="Source data only"
            order="-9">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.OnlyFirstLayout"
            icon="icons/target.png"
            id="eu.esdihumboldt.hale.ui.views.styledmap.only.transformed"
            name="Transformed data only"
            order="-8">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.DiagonalUpLayout"
            icon="icons/tl_to_br.png"
            id="eu.esdihumboldt.hale.ui.views.styledmap.dup.sourcefirst"
            name="Diagonal up (Source, Transformed)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.DiagonalUpLayout"
            icon="icons/br_to_tl.png"
            id="eu.esdihumboldt.hale.ui.views.styledmap.dup.transformedfirst"
            name="Diagonal up (Transformed, Source)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.DiagonalDownLayout"
            icon="icons/bl_to_tr.png"
            id="eu.esdihumboldt.hale.ui.views.styledmap.ddown.sourcefirst"
            name="Diagonal down (Source, Transformed)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
      </layout>
      <layout
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.impl.DiagonalDownLayout"
            icon="icons/tr_to_bl.png"
            id="eu.esdihumboldt.hale.ui.views.styledmap.ddown.transformedfirst"
            name="Diagonal down (Transformed, Source)">
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.transformed">
         </tileoverlay>
         <tileoverlay
               ref="eu.esdihumboldt.hale.ui.views.styledmap.source">
         </tileoverlay>
      </layout>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <serviceFactory
            factoryClass="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.extension.internal.PainterLayoutServiceFactory">
         <service
               serviceClass="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.extension.PainterLayoutService"></service>
      </serviceFactory>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="eu.esdihumboldt.hale.ui.views.styledmap.preferences.StyledMapPreferenceInitializer">
      </initializer>
   </extension>
   <extension
         point="de.fhg.igd.mapviewer.MapPainter">
      <painter
            class="eu.esdihumboldt.hale.ui.views.styledmap.clip.layout.extension.LayoutAugmentationPainter"
            name="Layout augmentation">
      </painter>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="eu.esdihumboldt.hale.ui.views.styledmap.handler.ZoomToSelectionHandler"
            commandId="eu.esdihumboldt.hale.ui.views.styledmap.zoomToSelection">
         <activeWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="or">
                  <or>
                     <instanceof
                           value="eu.esdihumboldt.hale.common.instance.model.InstanceReference">
                     </instanceof>
                     <instanceof
                           value="eu.esdihumboldt.hale.common.instance.model.Instance">
                     </instanceof>
                  </or>
               </iterate>
            </with>
         </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            category="eu.esdihumboldt.hale.ui"
            class="eu.esdihumboldt.hale.ui.views.styledmap.StyledMapView"
            icon="icons/world.gif"
            id="eu.esdihumboldt.hale.ui.views.styledmap"
            name="Map"
            restorable="true">
      </view>
   </extension>

</plugin>
